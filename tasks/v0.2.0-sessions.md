# Version 0.2.0 - Sessions

**Theme:** User Sessions, show user name on dashboard.

**Plan:** [playtime-release-plan.md](../playtime-release-plan.md)

---

## Goals

- Implement cookie-based sessions
- Show user name on dashboard

---

## Stories

### Epic: Session Management

| ID    | Story                                                                                        | Points | Acceptance Criteria                                                    |
| ----- | -------------------------------------------------------------------------------------------- | ------ | ---------------------------------------------------------------------- |
| S-020 | As a developer, I want @hapi/cookie configured so that sessions are maintained               | 3      | Cookie plugin registered; session strategy defined                     |
| S-021 | As a developer, I want session validation so that invalid sessions are rejected              | 3      | validate function checks user exists; returns isValid and credentials  |
| S-022 | As a user, when I login, a session cookie is created so that I stay logged in                 | 2      | cookieAuth.set() called on successful login with user ID               |
| S-023 | As a user, when I logout, my session is cleared so that I must login again                   | 1      | Cookie cleared on logout                                               |
| S-024 | As a developer, I want routes protected by default so that unauthenticated access is blocked | 2      | Default auth strategy applied; public routes explicitly set auth:false |

### Epic: Show User Name on Dashboard

| ID    | Story                                                                              | Points | Acceptance Criteria                                          |
| ----- | ---------------------------------------------------------------------------------- | ------ | ------------------------------------------------------------ |
| S-025 | As a user, I want to see my name on the dashboard so that I know I'm logged in     | 2      | Dashboard displays user's firstName or full name from session |

### Epic: E2E Sessions (Testing)

| ID   | Story                                                                                          | Points | Acceptance Criteria                                                                 |
| ---- | ---------------------------------------------------------------------------------------------- | ------ | ----------------------------------------------------------------------------------- |
| T-007 | As a developer, I want E2E session tests so that session persistence and user name are verified | 3      | test/e2e/auth.spec.js: login, reload dashboard still authenticated; logout, reload to /; dashboard shows user name |

---

## New Deliverables

```
Modified:
~ src/server.js (cookie auth)
~ src/controllers/accounts-controller.js (session handling)
~ src/controllers/dashboard-controller.js (show user name)
~ src/views/partials/menu.hbs (user name display)
~ src/views/dashboard-view.hbs (user name display)
~ src/web-routes.js (session routes)
~ test/e2e/auth.spec.js (session and user name assertions)
```

---

## Total: ~16 Story Points
