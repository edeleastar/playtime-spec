# Version 0.4.0 - Tracks

**Theme:** Tracks in playlists, support track and playlist delete.

**Plan:** [playtime-release-plan.md](../playtime-release-plan.md)

---

## Goals

- Add track data model
- Create playlist detail view with tracks
- Enable track and playlist deletion

---

## Stories

### Epic: Track Model

| ID    | Story                                                                                        | Points | Acceptance Criteria                                                                                          |
| ----- | -------------------------------------------------------------------------------------------- | ------ | ------------------------------------------------------------------------------------------------------------ |
| S-035 | As a developer, I want a Track model so that I can store track data                            | 3      | trackMemStore with addTrack, getAllTracks, getTrackById, getTracksByPlaylistId, deleteTrack, deleteAllTracks |
| S-036 | As a developer, I want tracks linked to playlists so that playlist content is organized      | 2      | Track has playlistid field; addTrack takes playlistId parameter                                              |
| S-037 | As a developer, I want getPlaylistById to include tracks so that playlist detail is complete | 2      | getPlaylistById populates tracks[] array from trackStore                                                     |

### Epic: Playlist Detail View

| ID    | Story                                                                             | Points | Acceptance Criteria                                                    |
| ----- | --------------------------------------------------------------------------------- | ------ | ---------------------------------------------------------------------- |
| S-038 | As a user, I want to view a playlist's details so that I can see its tracks       | 3      | GET /playlist/{id} renders playlist-view with title and tracks         |
| S-039 | As a user, I want to see tracks in a table so that information is clear           | 2      | list-tracks partial renders table with title, artist, duration columns |
| S-040 | As a user, I want a form to add tracks so that I can build my playlist            | 2      | add-track partial with title, artist, duration fields                  |
| S-041 | As a user, I can add a track to a playlist so that it appears in the list         | 3      | POST /playlist/{id}/addtrack creates track; redirects to playlist view |
| S-042 | As a user, I want a link from playlist card to detail view so that I can navigate | 1      | Folder icon link on playlist card opens /playlist/{id}                 |

### Epic: Delete Operations

| ID    | Story                                                                        | Points | Acceptance Criteria                                                           |
| ----- | ---------------------------------------------------------------------------- | ------ | ----------------------------------------------------------------------------- |
| S-043 | As a user, I want to delete a playlist so that I can remove unwanted ones    | 3      | GET /dashboard/deleteplaylist/{id} removes playlist; redirects to dashboard   |
| S-044 | As a user, I want a delete button on playlist cards so that deletion is easy | 1      | Trash icon link on each playlist card                                         |
| S-045 | As a user, I want to delete a track so that I can remove unwanted ones       | 3      | GET /playlist/{id}/deletetrack/{trackid} removes track; redirects to playlist  |
| S-046 | As a user, I want a delete button on track rows so that deletion is easy     | 1      | Trash icon link on each track row                                              |

### Epic: E2E Tracks (Testing)

| ID   | Story                                                                                    | Points | Acceptance Criteria                                                                 |
| ---- | ---------------------------------------------------------------------------------------- | ------ | ----------------------------------------------------------------------------------- |
| T-010 | As a developer, I want E2E track tests so that track CRUD and navigation are verified    | 3      | test/e2e/tracks.spec.js: add track to playlist, see in list; delete track; delete playlist with tracks; dashboard → detail → back |

### Epic: Track Store Unit Tests (Testing)

| ID   | Story                                                                                    | Points | Acceptance Criteria                                                                 |
| ---- | ---------------------------------------------------------------------------------------- | ------ | ----------------------------------------------------------------------------------- |
| T-011 | As a developer, I want Track store unit tests so that CRUD and getTracksByPlaylistId are verified | 3      | test/track-model-test.js: addTrack, getTrackById, getTracksByPlaylistId, deleteTrack, deleteAllTracks |

---

## New Deliverables

```
+ src/controllers/playlist-controller.js
+ src/models/mem/track-mem-store.js
+ src/views/playlist-view.hbs
+ src/views/partials/list-tracks.hbs
+ src/views/partials/add-track.hbs

Modified:
~ src/models/db.js (trackStore)
~ src/controllers/dashboard-controller.js (deletePlaylist handler)
~ src/controllers/playlist-controller.js (deleteTrack handler)
~ src/views/partials/list-playlists.hbs (detail link, delete button)
~ src/views/partials/list-tracks.hbs (delete button)
~ src/web-routes.js (playlist routes, delete routes)
+ test/e2e/tracks.spec.js
+ test/track-model-test.js
```

---

## Total: ~30 Story Points
